# AI故事/诗歌生成器

## 项目简介

这是一个基于预训练大语言模型的AI故事/诗歌生成器，用户可以通过输入关键词，选择不同的风格，生成创意性的故事或诗歌。该项目使用中文预训练模型，支持多种故事和诗歌风格，提供直观的Web界面，方便用户使用。

## 功能特点

- **📖 故事生成**：支持8种故事主题（奇幻、科幻、悬疑、爱情、冒险、历史、恐怖、喜剧）
- **📝 诗歌生成**：支持6种诗歌类型（现代诗、古体诗、宋词、儿歌、俳句、自由诗）
- **🔑 关键词选择**：提供常用关键词按钮，支持手动输入和按钮选择两种方式
- **⚙️ 自定义参数**：
  - 故事生成：主题、写作风格、角色设定、长度、创意度
  - 诗歌生成：诗歌类型、押韵方式、行数控制、情感基调、创意度
- **🎨 友好界面**：基于Gradio的现代Web界面，响应式设计
- **📚 生成历史**：自动保存最近50条生成记录，支持查看和加载
- **❤️ 作品收藏**：可收藏喜欢的作品，方便后续查看
- **💾 内容导出**：支持将生成内容导出为文本文件
- **📋 复制功能**：一键复制生成内容到剪贴板
- **🇨🇳 中文支持**：使用中文预训练模型，生成流畅的中文内容
- **💻 本地模型存储**：自动将模型下载到本地文件夹，支持离线使用
- **📡 国内镜像支持**：使用国内镜像源下载模型，提高下载速度

## 技术栈

- **编程语言**：Python 3.8+
- **深度学习框架**：PyTorch
- **自然语言处理库**：Hugging Face Transformers
- **Web界面框架**：Gradio
- **模型**：uer/gpt2-chinese-cluecorpussmall（中文GPT2模型）

## 项目环境

### 硬件要求
- **CPU**：Intel i5或AMD Ryzen 5以上
- **内存**：8GB以上
- **存储**：500MB以上可用空间（用于存储模型文件）
- **网络**：首次运行需要网络连接下载模型，后续可离线使用

### 软件要求
- **操作系统**：Windows 10/11、macOS 10.15+、Linux
- **Python版本**：3.8、3.9、3.10、3.11
- **依赖管理**：pip 21.0+

## 安装步骤

### 1. 克隆或下载项目

将项目克隆或下载到本地目录：

```bash
# 克隆项目（如果使用Git）
git clone <项目仓库地址>

# 或者直接下载项目压缩包并解压
```

**另外提供网盘下载链接：**
- **链接**：`https://www.123865.com/s/Ry3kjv-fxoyd?pwd=aige#`
- **提取码**：aige

### 2. 创建虚拟环境（可选但推荐）

为了避免依赖冲突，建议创建一个虚拟环境：

```bash
# Windows
python -m venv .venv
.venv\Scripts\activate

# macOS/Linux
python3 -m venv .venv
source .venv/bin/activate
```

### 3. 安装依赖包

使用pip安装项目所需的依赖包：

```bash
pip install -r requirements.txt
```

## 运行方法

### 1. 启动应用程序

在项目目录下运行主程序：

```bash
python story_generator.py
```

### 2. 访问Web界面

程序启动后，会在终端输出类似以下信息：

```
Device set to use cpu
成功从本地文件夹加载模型
* Running on local URL:  http://127.0.0.1:7860
```

在浏览器中打开输出中的本地URL（通常是 http://127.0.0.1:7860 或 http://localhost:7860）。

### 3. 使用应用程序

1. **选择生成类型**：点击"生成故事"或"生成诗歌"标签页
2. **输入关键词**：
   - 方式一：直接在文本框中输入关键词，用逗号分隔
   - 方式二：点击下方的关键词按钮，自动添加到输入框
3. **选择风格**：从下拉菜单中选择故事或诗歌的风格
4. **调整参数**：
   - **长度**：调整生成内容的长度（故事：50-2000，诗歌：30-200）
   - **创意度**：调整生成内容的随机性（0.1-1.0）
5. **点击生成按钮**：点击"生成故事"或"生成诗歌"按钮
6. **查看结果**：生成的内容会显示在右侧的文本框中

## 使用示例

### 示例1：生成故事

1. 选择"📖 故事生成"标签页
2. 点击关键词按钮：公主、城堡、龙
3. 选择故事主题：奇幻
4. 选择写作风格：通俗
5. 输入主要角色：勇敢的骑士
6. 调整故事长度：500字
7. 调整创意度：0.7
8. 点击"🚀 生成故事"按钮

### 示例2：生成诗歌

1. 选择"📝 诗歌生成"标签页
2. 输入关键词：春天,花朵,希望
3. 选择诗歌类型：现代诗
4. 选择押韵方式：不要求
5. 调整行数：12行
6. 选择情感基调：喜悦
7. 调整创意度：0.8
8. 点击"🚀 生成诗歌"按钮

### 示例3：使用辅助功能

1. 生成内容后，点击"❤️ 收藏作品"保存喜欢的作品
2. 点击"💾 导出文本"将生成内容保存为文件
3. 点击"📋 复制内容"复制到剪贴板
4. 在"📚 生成历史"标签页查看过往生成记录
5. 在"❤️ 我的收藏"标签页查看收藏的作品

## 项目结构

```
ai-generator/
├── story_generator.py  # 主程序文件
├── requirements.txt    # 依赖包列表
├── README.md          # 项目说明文档
├── local_model/       # 本地模型存储目录（自动创建）
└── .venv/             # 虚拟环境目录（可选，手动创建）
```

## 模型说明

### 主要模型
- **名称**：uer/gpt2-chinese-cluecorpussmall
- **类型**：中文GPT2模型
- **大小**：约421MB
- **用途**：生成中文故事和诗歌

### 模型存储
- **存储位置**：项目根目录下的`local_model`文件夹
- **下载方式**：首次运行自动从国内镜像源下载
- **更新机制**：仅首次运行下载，后续使用本地模型

### 国内镜像支持
项目使用`https://hf-mirror.com`作为模型下载镜像源，提高国内用户的下载速度。

## 注意事项

1. **首次运行**：首次运行需要网络连接下载模型，可能需要几分钟时间，具体取决于网络速度
2. **生成质量**：生成内容的质量取决于输入的关键词和选择的参数
3. **关键词建议**：使用具体、相关的关键词，避免使用过于模糊或无关的词汇
4. **创意度调整**：创意度越高，生成内容越新颖，但可能会降低连贯性；创意度越低，生成内容越保守，但连贯性更好
5. **长度调整**：过长的生成内容可能会导致重复或逻辑混乱，建议根据需要调整合适的长度

## 常见问题

### Q: 程序启动时提示"连接超时"怎么办？
A: 程序正在尝试从国内镜像源下载模型，请检查网络连接是否正常，或稍后重试。

### Q: 生成内容质量不好怎么办？
A: 尝试调整关键词，使用更具体、相关的词汇；调整创意度和长度参数；尝试不同的风格。

### Q: 可以在没有网络的情况下使用吗？
A: 首次运行需要网络连接下载模型，后续可以离线使用。

### Q: 模型文件可以手动下载吗？
A: 可以，将模型文件下载后放入`local_model`文件夹即可。

## 扩展建议

1. **添加更多风格**：支持更多故事和诗歌风格
2. **内容保存功能**：添加生成内容保存到文件的功能
3. **内容审核**：添加生成内容的审核机制
4. **多语言支持**：支持生成英文等其他语言的内容
5. **更强大的模型**：集成更强大的预训练模型，如GPT-3.5、GPT-4等
6. **自定义模型**：支持用户上传自己的预训练模型



如果您在使用过程中遇到问题自行自行解决，不为后续进行优化处理。
